<div class="detalle-cliente-container">
  @if (loading()) {
  <app-loading message="Cargando cliente..." />
  } @else if (error()) {
  <app-error-message [title]="'Error al cargar cliente'" [message]="error()!" (retry)="onRetry()" />
  } @else if (cliente(); as cli) {
  <div class="header">
    <div class="title-section">
      <p-button icon="pi pi-arrow-left" [rounded]="true" [text]="true" (onClick)="volver()" pTooltip="Volver" />
      <h2>{{ cli.nombre }}</h2>
    </div>
    <div class="actions">
      <p-button label="Editar" icon="pi pi-pencil" severity="warn" (onClick)="editar()" />
      <p-button label="Desactivar" icon="pi pi-ban" severity="danger" (onClick)="desactivar()"
        [disabled]="cli.estado === 'INACTIVO'" />
    </div>
  </div>

  <div class="content-grid">
    <!-- Información General -->
    <p-card header="Información General">
      <div class="info-grid">
        <div class="info-item">
          <span class="label">Código:</span>
          <span class="value">{{ cli.codigo || '-' }}</span>
        </div>
        <div class="info-item">
          <span class="label">Nombre:</span>
          <span class="value"><strong>{{ cli.nombre }}</strong></span>
        </div>
        <div class="info-item">
          <span class="label">Tipo Documento:</span>
          <span class="value">{{ cli.tipoDocumento || '-' }}</span>
        </div>
        <div class="info-item">
          <span class="label">Número Documento:</span>
          <span class="value">{{ cli.numeroDocumento || '-' }}</span>
        </div>
        <div class="info-item">
          <span class="label">Teléfono:</span>
          <span class="value">{{ cli.telefono || '-' }}</span>
        </div>
        <div class="info-item">
          <span class="label">Tipo de Negocio:</span>
          <span class="value">{{ cli.tipoNegocio || '-' }}</span>
        </div>
        <div class="info-item">
          <span class="label">Estado:</span>
          <p-tag [value]="cli.estado" [severity]="getEstadoSeverity(cli.estado)" />
        </div>
      </div>
    </p-card>

    <!-- Ubicación -->
    <p-card header="Ubicación">
      <div class="info-grid">
        <div class="info-item full-width">
          <span class="label">Dirección:</span>
          <span class="value">{{ cli.direccion || '-' }}</span>
        </div>
        <div class="info-item">
          <span class="label">Barrio:</span>
          <span class="value">{{ cli.barrio || '-' }}</span>
        </div>
        <div class="info-item">
          <span class="label">Comuna:</span>
          <span class="value">{{ cli.comuna || '-' }}</span>
        </div>
      </div>
    </p-card>

    <!-- Configuración Comercial -->
    <p-card header="Configuración Comercial" styleClass="full-width">
      <div class="info-grid">
        <div class="info-item">
          <span class="label">Tipo de Tarifa:</span>
          <p-tag [value]="getTarifaLabel(cli.tipoTarifa)" [severity]="getTarifaSeverity(cli.tipoTarifa)" />
        </div>
        <div class="info-item">
          <span class="label">Horario de Entrega:</span>
          <span class="value">{{ cli.horarioEntrega || '-' }}</span>
        </div>
        @if (cli.ruta) {
        <div class="info-item">
          <span class="label">Ruta Asignada:</span>
          <p-tag [value]="cli.ruta.nombre" severity="info" />
        </div>
        }
        @if (cli.conductor) {
        <div class="info-item">
          <span class="label">Conductor Asignado:</span>
          <span class="value">{{ cli.conductor.nombre }}</span>
        </div>
        }
      </div>
    </p-card>
  </div>
  }
</div>